<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nethu Bbh 🥵💋</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="chat-container">
    <div class="chat-header">
      <img src="dp.jpg" class="dp" alt="DP">
      <div class="contact-info">
        <div class="contact-name">Nethu Bbh 🥵💋</div>
        <div class="contact-subtext">online</div>
      </div>
      <div class="header-icons">
        <i class="material-icons">videocam</i>
        <i class="material-icons">call</i>
        <i class="material-icons">more_vert</i>
      </div>
    </div>

    <div class="chat-body" id="chat-body">
      <div class="encryption-banner">
        🔒 Messages and calls are end-to-end encrypted. Only people in this chat can read, listen to, or share them.
      </div>
      <div class="typing-indicator" id="typingIndicator" style="display:none;">Nethu Bbh is typing...</div>
    </div>

    <div class="button-group">
      <button class="share-button" id="shareBtn" onclick="shareToWhatsApp()">Share 0/3 🔐</button>
      <button class="send-button" id="sendPhotosBtn" onclick="sendPhotos()">Get Fun 🍆💦</button>
    </div>

    <div id="warning-msg">⚠️ First Share!</div>

    <div class="chat-footer" id="chatFooter">
      <input type="text" placeholder="Message (max 20 chars)" id="userInput" maxlength="20">
      <i class="material-icons" id="sendIcon">send</i>
    </div>
  </div>

  <script>
    const messages = [
      "හායි පැටියො 🥵🧡 Chat එක Lock කරලා තියෙන්නෙ❗",
      "පහල Share Button එක Click කරලා කෙලිංම Whatsapp Group 3 කට Share කරලා Chat එක Unlock කරගන්න 🥵💋",
      "ඊටපස්සෙ Get Fun Click කරලා ඔයාට මම එක්ක ඇති තරම් Fun ගන්න පුලුවන් 😍❤️ ඉක්මන් කරන්න පැටියෝ මට ඉන්න බෑ 🥵💦"
    ];

    const chatBody = document.getElementById('chat-body');
    const shareBtn = document.getElementById('shareBtn');
    const sendPhotosBtn = document.getElementById('sendPhotosBtn');
    const warningMsg = document.getElementById('warning-msg');
    const userInput = document.getElementById('userInput');
    const sendIcon = document.getElementById('sendIcon');
    const chatFooter = document.getElementById('chatFooter');
    const typingIndicator = document.getElementById('typingIndicator');

    window.onload = () => {
      messages.forEach((msg, index) => {
        setTimeout(() => {
          const messageEl = document.createElement('div');
          messageEl.className = 'message';
          messageEl.textContent = msg;
          chatBody.appendChild(messageEl);
          chatBody.scrollTop = chatBody.scrollHeight;
        }, (index + 1) * 2000);
      });
    };

    function shareToWhatsApp() {
      const msg = encodeURIComponent(
        "වයස 21 බෝනික්කියෙක් වගේ කෙල්ලෙක්ගෙන් Free වීඩියෝ කෝල් ෆන් ගන්න පහල Link එකෙන් එන්න 🥵💦\n\nhttps://chat-wa.github.io/nethuki-fdo/"
      );
      const link = `https://wa.me/?text=${msg}`;
      window.location.href = link;

      shareBtn.disabled = true;
      setTimeout(() => {
        shareBtn.textContent = "Shared ✅";
        sendPhotosBtn.disabled = false;
        sendPhotosBtn.classList.add("enabled");
        chatFooter.style.display = "none"; // Hide input bar and icon
      }, 5000);
    }

    function sendPhotos() {
      if (!sendPhotosBtn.classList.contains("enabled")) {
        showWarning();
        return;
      }
      window.location.href = "https://diagnosisscript.com/dcf7x23r83?key=2ac6355133543eecf956d375da68f7b6";
    }

    function showWarning() {
      warningMsg.classList.add("show-warning");
      setTimeout(() => {
        warningMsg.classList.remove("show-warning");
      }, 3000);
    }

    let typingTimeout;

    userInput.addEventListener("input", () => {
      if (userInput.value.trim().length > 0) {
        sendIcon.style.opacity = 1;
        sendIcon.style.cursor = "pointer";

        // Show typing indicator
        typingIndicator.style.display = "block";
        clearTimeout(typingTimeout);
        typingTimeout = setTimeout(() => {
          typingIndicator.style.display = "none";
        }, 2000);
      } else {
        sendIcon.style.opacity = 0.4;
        sendIcon.style.cursor = "not-allowed";
        typingIndicator.style.display = "none";
      }
    });

    sendIcon.addEventListener("click", () => {
      if (!sendPhotosBtn.classList.contains("enabled")) {
        showWarning();
        return;
      }
      if (userInput.value.trim().length > 0) {
        const msg = document.createElement("div");
        msg.className = "message";
        msg.textContent = userInput.value;
        chatBody.appendChild(msg);
        chatBody.scrollTop = chatBody.scrollHeight;
        userInput.value = "";
        sendIcon.style.opacity = 0.4;
        sendIcon.style.cursor = "not-allowed";
        typingIndicator.style.display = "none";
      }
    });
  </script>
</body>
</html>
